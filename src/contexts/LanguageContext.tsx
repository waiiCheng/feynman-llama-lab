import React, { createContext, useContext, useState, useEffect } from 'react';

export type Language = 'zh' | 'en';

interface LanguageContextType {
  language: Language;
  setLanguage: (lang: Language) => void;
  t: (key: string, variables?: Record<string, string | number>) => string;
}

const LanguageContext = createContext<LanguageContextType | undefined>(undefined);

const translations = {
  zh: {
    // Navigation
    'nav.annotation': 'æ ‡æ³¨',
    'nav.management': 'ç®¡ç†',
    'nav.architecture': 'æ¶æ„',
    'nav.settings': 'è®¾ç½®',
    'nav.statistics': 'ç»Ÿè®¡',
    
    // Architecture tabs
    'arch.localTraining': 'æœ¬åœ°è®­ç»ƒ',
    'arch.overview': 'æ¶æ„æ¦‚è§ˆ',
    'arch.knowledgeGraph': 'çŸ¥è¯†å›¾è°±',
    'arch.rag': 'RAG æ£€ç´¢',
    'arch.fineTuning': 'æ¨¡å‹å¾®è°ƒ',
    
    // Annotation Form
    'annotation.title': 'è´¹æ›¼å­¦ä¹ æ³•æ ‡æ³¨',
    'annotation.subtitle': '"If you want to learn about nature, to appreciate nature, it is necessary that you understand the language that she speaks in."',
    'annotation.author': 'â€” Richard P. Feynman',
    'annotation.question': 'ç”¨æˆ·é—®é¢˜',
    'annotation.response': 'è´¹æ›¼å¼å›ç­”',
    'annotation.styleFeatures': 'æ€ç»´æ¨¡å¼æ ‡ç­¾',
    'annotation.quality': 'å›ç­”è´¨é‡',
    'annotation.notes': 'å¤‡æ³¨',
    'annotation.save': 'ä¿å­˜æ ‡æ³¨',
    'annotation.saveAndNext': 'ä¿å­˜å¹¶ä¸‹ä¸€æ¡',
    'annotation.question.placeholder': 'ä¾‹å¦‚ï¼šä»€ä¹ˆæ˜¯é‡å­åŠ›å­¦ï¼Ÿ',
    'annotation.response.placeholder': 'è´¹æ›¼ä¼šæ€ä¹ˆè§£é‡Šè¿™ä¸ªé—®é¢˜ï¼Ÿç”¨ç®€å•ã€ç›´è§‚çš„æ–¹å¼...',
    'annotation.quality.placeholder': 'é€‰æ‹©è´¨é‡ç­‰çº§',
    'annotation.notes.placeholder': 'å…¶ä»–å¤‡æ³¨ä¿¡æ¯...',
    'annotation.validation.title': 'è¯·å¡«å†™å¿…è¦å­—æ®µ',
    'annotation.validation.desc': 'é—®é¢˜å’Œå›ç­”éƒ½æ˜¯å¿…å¡«é¡¹',
    'annotation.saved.title': 'æ ‡æ³¨å·²ä¿å­˜',
    'annotation.saved.desc2': 'æ•°æ®å·²æˆåŠŸä¿å­˜ï¼Œå¯ç»§ç»­ä¸‹ä¸€æ¡æ ‡æ³¨',
    'annotation.templateHint': 'æŒ‰ / å¿«é€Ÿæ’å…¥æ¨¡æ¿',
    
    // Templates
    'template.analogy': 'è¿™å°±åƒ...',
    'template.simplify': 'ç®€å•æ¥è¯´...',
    'template.story': 'æƒ³è±¡ä¸€ä¸‹...',
    'template.firstPrinciple': 'ä»æœ€åŸºç¡€å¼€å§‹...',
    'template.example': 'æ¯”å¦‚è¯´...',
    'template.why': 'ä¸ºä»€ä¹ˆä¼šè¿™æ ·å‘¢ï¼Ÿ',
    'template.conclusion': 'æ€»ç»“ä¸€ä¸‹...',
    
    // Quality levels
    'quality.excellent': 'ä¼˜ç§€èŒƒä¾‹',
    'quality.good': 'è‰¯å¥½',
    'quality.needsWork': 'éœ€æ”¹è¿›',
    
    // Style features
    'style.analogy': 'ä½¿ç”¨ç±»æ¯”',
    'style.simplify': 'ç®€åŒ–å¤æ‚',
    'style.story': 'è®²æ•…äº‹',
    'style.firstprinciples': 'ç¬¬ä¸€æ€§åŸç†',
    'style.analogy.desc': 'ç”¨ç®€å•ä¾‹å­è§£é‡Šå¤æ‚æ¦‚å¿µ',
    'style.simplify.desc': 'åŒ–ç¹ä¸ºç®€çš„è¡¨è¾¾æ–¹å¼',
    'style.story.desc': 'ç”¨æ•…äº‹æƒ…èŠ‚å¢å¼ºç†è§£',
    'style.firstprinciples.desc': 'ä»åŸºæœ¬åŸç†å‡ºå‘æ€è€ƒ',
    
    // Shortcuts
    'shortcuts.save': 'Ctrl+Enter: ä¿å­˜å¹¶ä¸‹ä¸€æ¡',
    'shortcuts.tab': 'Tab: åˆ‡æ¢å­—æ®µ',
    'shortcuts.template': '/: æ’å…¥æ¨¡æ¿',
    'shortcuts.clear': 'Escape: æ¸…ç©º',
    'shortcuts.keyboard': 'å¿«æ·é”®',
    
    // Workspace
    'workspace.dualMode': 'åŒå±æ¨¡å¼',
    'workspace.singleMode': 'å•å±æ¨¡å¼',
    
    // Data Management
    'manage.title': 'æ•°æ®ç®¡ç†',
    'manage.subtitle': 'å…± {total} æ¡æ ‡æ³¨æ•°æ®ï¼Œå·²ç­›é€‰ {filtered} æ¡',
    'manage.export': 'å¯¼å‡ºæ•°æ®',
    'manage.search': 'æœç´¢é—®é¢˜æˆ–å›ç­”å†…å®¹...',
    'manage.filterQuality': 'ç­›é€‰è´¨é‡ç­‰çº§',
    'manage.allQuality': 'å…¨éƒ¨è´¨é‡',
    'manage.noData': 'æš‚æ— æ ‡æ³¨æ•°æ®',
    'manage.noDataDesc': 'å¼€å§‹åˆ›å»ºç¬¬ä¸€ä¸ªæ ‡æ³¨å§ï¼',
    'manage.viewDetail': 'æŸ¥çœ‹æ ‡æ³¨è¯¦æƒ…',
    'manage.question': 'é—®é¢˜',
    'manage.response': 'è´¹æ›¼å¼å›ç­”',
    'manage.stylePattern': 'æ€ç»´æ¨¡å¼',
    'manage.notes': 'å¤‡æ³¨',
    'manage.deleted': 'å·²åˆ é™¤',
    'manage.deletedDesc': 'æ ‡æ³¨æ•°æ®å·²æˆåŠŸåˆ é™¤',
    'manage.exported': 'å¯¼å‡ºå®Œæˆ',
    'manage.exportedDesc': 'æ ‡æ³¨æ•°æ®å·²å¯¼å‡ºä¸ºJSONæ–‡ä»¶',
    
    // Local Training Setup
    'training.title': 'æœ¬åœ°è®­ç»ƒé…ç½®',
    'training.subtitle': 'åœ¨æ‚¨çš„æœ¬åœ°ç¯å¢ƒä¸­è®­ç»ƒè´¹æ›¼é£æ ¼çš„ LLM æ¨¡å‹',
    'training.setup': 'è®­ç»ƒé…ç½®',
    'training.data': 'æ•°æ®å‡†å¤‡',
    'training.scripts': 'è„šæœ¬ç”Ÿæˆ',
    'training.deploy': 'éƒ¨ç½²æŒ‡å—',
    'training.modelParams': 'æ¨¡å‹å‚æ•°',
    'training.systemReqs': 'ç³»ç»Ÿè¦æ±‚',
    'training.baseModel': 'åŸºç¡€æ¨¡å‹',
    'training.epochs': 'è®­ç»ƒè½®æ•°',
    'training.batchSize': 'æ‰¹æ¬¡å¤§å°',
    'training.learningRate': 'å­¦ä¹ ç‡',
    'training.gpuMemory': 'GPU å†…å­˜',
    'training.systemMemory': 'ç³»ç»Ÿå†…å­˜',
    'training.storage': 'å­˜å‚¨ç©ºé—´',
    'training.pythonVersion': 'Python ç‰ˆæœ¬',
    'training.dataStats': 'æ•°æ®ç»Ÿè®¡',
    'training.annotationCount': 'æ ‡æ³¨æ•°é‡',
    'training.qualityDistribution': 'è´¨é‡åˆ†å¸ƒ',
    'training.avgLength': 'å¹³å‡é•¿åº¦',
    'training.exportTrainingData': 'å¯¼å‡ºè®­ç»ƒæ•°æ®',
    'training.generateScript': 'ç”Ÿæˆè®­ç»ƒè„šæœ¬',
    'training.configFile': 'é…ç½®æ–‡ä»¶',
    'training.requirementsFile': 'ä¾èµ–æ–‡ä»¶',
    'training.trainingScript': 'è®­ç»ƒè„šæœ¬',
    'training.localDeploy': 'æœ¬åœ°éƒ¨ç½²',
    'training.cloudDeploy': 'äº‘ç«¯éƒ¨ç½²',
    'training.downloadGenerated': 'ä¸‹è½½å·²ç”Ÿæˆ',
    'training.configGenerated': 'é…ç½®æ–‡ä»¶å·²ç”Ÿæˆ',
    'training.configDesc': 'training_config.json å·²ä¸‹è½½',
    'training.reqGenerated': 'ä¾èµ–æ–‡ä»¶å·²ç”Ÿæˆ',
    'training.reqDesc': 'requirements.txt å·²ä¸‹è½½',
    
    // Preview Panel
    'preview.realTime': 'å®æ—¶é¢„è§ˆ',
    'preview.quality': 'è´¨é‡è¯„çº§',
    'preview.analysis': 'è´¨é‡åˆ†æ',
    'preview.wordCount': 'å­—æ•°ç»Ÿè®¡',
    'preview.complexity': 'å¤æ‚åº¦',
    'preview.complexity.å¤æ‚': 'å¤æ‚',
    'preview.complexity.ä¸­ç­‰': 'ä¸­ç­‰',
    'preview.complexity.ç®€å•': 'ç®€å•',
    'preview.hasAnalogy': 'åŒ…å«ç±»æ¯”',
    'preview.hasExample': 'æœ‰å…·ä½“ä¾‹å­',
    'preview.isSimple': 'é•¿åº¦é€‚ä¸­',
    
    // Template Selector
    'template.title': 'è´¹æ›¼æ¨¡æ¿',
    'template.category.explanation': 'è§£é‡Šè¯´æ˜',
    'template.category.reasoning': 'æ¨ç†æ€è€ƒ',
    'template.category.storytelling': 'æ•…äº‹å™è¿°',
    'template.tip': 'æç¤ºï¼šåœ¨æ–‡æœ¬æ¡†ä¸­æŒ‰ "/" å¿«é€Ÿè°ƒç”¨æ¨¡æ¿',
    
    // Architecture Overview
    'arch.overview.title': 'ç³»ç»Ÿæ¶æ„è“å›¾',
    'arch.overview.subtitle': 'ç»“åˆå¾®è°ƒã€RAG å’ŒçŸ¥è¯†å›¾è°±çš„è´¹æ›¼å­¦ä¹ æ³• LLM ç³»ç»Ÿæ¶æ„',
    'arch.ui.title': 'ç”¨æˆ·ç•Œé¢å±‚ (Web)',
    'arch.ui.desc': 'è´¹æ›¼æ ‡æ³¨ç•Œé¢ã€ç®¡ç†ç³»ç»Ÿ',
    'arch.ui.components': ['æ ‡æ³¨é¡µé¢', 'ç®¡ç†ç•Œé¢', 'å®æ—¶é¢„è§ˆ'],
    'arch.kg.title': 'çŸ¥è¯†å›¾è°±å±‚',
    'arch.kg.desc': 'é¢„å¤„ç†çš„ç»“æ„åŒ–çŸ¥è¯†',
    'arch.kg.components': ['è´¹æ›¼çš„ç¬¬ä¸€æ€§åŸç†åˆ†è§£æ ‘', 'è·¨é¢†åŸŸç±»æ¯”ç½‘ç»œ', 'æ¨ç†å¼•æ“'],
    'arch.rag.title': 'RAG æ£€ç´¢å±‚',
    'arch.rag.desc': 'å®æ—¶å¤–æŒ‚èµ„æ–™æ£€ç´¢',
    'arch.rag.components': ['å‘é‡æ•°æ®åº“', 'åŸå§‹æ–‡æœ¬åº“', 'ç›¸ä¼¼åº¦åŒ¹é…'],
    'arch.model.title': 'åŸºç¡€æ¨¡å‹å±‚',
    'arch.model.desc': 'å¾®è°ƒåçš„ Mistral',
    'arch.model.components': ['è´¹æ›¼è¯­æ„Ÿæ¨¡å‹', 'ä»·å€¼è§‚å¯¹é½', 'åŸºç¡€æ¨ç†èƒ½åŠ›'],
    'arch.status.active': 'å·²å®ç°',
    'arch.status.ready': 'å¯å¼€å§‹',
    'arch.status.planned': 'è®¡åˆ’ä¸­',
    'arch.dataflow.title': 'âš¡ï¸ ä½œæˆ˜æµç¨‹æ¨æ¼”',
    'arch.dataflow.question': 'ç”¨æˆ·æé—®ï¼š"è´¹æ›¼å…ˆç”Ÿï¼Œè¯·ç”¨ä½ çš„æ€ç»´æ¨¡å¼ï¼Œè§£é‡Šä¸€ä¸‹ä¸ºä»€ä¹ˆå¤©ç©ºæ˜¯è“è‰²çš„ï¼Ÿ"',
    'arch.dataflow.step1': '1. ã€çŸ¥è¯†å›¾è°±ã€‘äº‹å®æ¡†æ¶æ„å»ºï¼šç³»ç»Ÿè¯†åˆ«æ ¸å¿ƒæ¦‚å¿µã€Œå¤©ç©ºæ˜¯è“è‰²çš„ã€â†’ [ç‘åˆ©æ•£å°„, å…‰çš„æ³¢é•¿, å¤§æ°”åˆ†å­]',
    'arch.dataflow.step2': '2. ã€RAGæ£€ç´¢ã€‘åŸå§‹æƒ…æŠ¥è·å–ï¼šæ£€ç´¢å¼•æ“å–å›è§£é‡Š"ç‘åˆ©æ•£å°„"çš„æƒå¨ç‰©ç†å­¦åŸå§‹æ–‡æœ¬',
    'arch.dataflow.step3': '3. ã€è´¹æ›¼å†…æ ¸ã€‘ç”Ÿæˆæ´å¯Ÿï¼šFeynmanOSå¯åŠ¨"ç±»æ¯”æ€ç»´"æ¨¡å¼ï¼Œå°†å¤æ‚ç‰©ç†åŸæ–‡é‡æ„ä¸º"å¼¹ç å°æ¯”å–»"',
    'arch.roadmap.title': 'å®æ–½è·¯çº¿å›¾',
    'arch.phase1.title': 'ç¬¬ä¸€é˜¶æ®µï¼šå¾®è°ƒè®­ç»ƒ',
    'arch.phase1.desc': 'ä½¿ç”¨æ ‡æ³¨æ•°æ®è®­ç»ƒè´¹æ›¼é£æ ¼æ¨¡å‹',
    'arch.phase2.title': 'ç¬¬äºŒé˜¶æ®µï¼šRAG é›†æˆ',
    'arch.phase2.desc': 'æ·»åŠ å‘é‡æ•°æ®åº“å’Œæ–‡æ¡£æ£€ç´¢',
    'arch.phase3.title': 'ç¬¬ä¸‰é˜¶æ®µï¼šçŸ¥è¯†å›¾è°±',
    'arch.phase3.desc': 'æ„å»ºæ¦‚å¿µå…³ç³»ç½‘ç»œå’Œæ¨ç†å¼•æ“',
    'arch.startTraining': 'å¼€å§‹æœ¬åœ°è®­ç»ƒ',
    'arch.localOnly': 'å®Œå…¨æœ¬åœ°åŒ–ï¼Œæ— éœ€å¤–éƒ¨ä¾èµ–',
    
    // Fine-tuning Layer
    'finetune.title': 'åŸºç¡€æ¨¡å‹å±‚',
    'finetune.subtitle': 'å¾®è°ƒ Mistral æ¨¡å‹ï¼Œæ³¨å…¥è´¹æ›¼å¼è§£é‡Šé£æ ¼å’Œä»·å€¼è§‚å¯¹é½',
    'finetune.console': 'è®­ç»ƒæ§åˆ¶å°',
    'finetune.totalSamples': 'æ€»æ ·æœ¬æ•°',
    'finetune.epochs': 'è®­ç»ƒè½®æ•°',
    'finetune.currentEpoch': 'å½“å‰è½®æ¬¡',
    'finetune.progress': 'å®Œæˆåº¦',
    'finetune.status.training': 'è®­ç»ƒä¸­',
    'finetune.status.paused': 'å·²æš‚åœ',
    'finetune.status.idle': 'ç©ºé—²',
    'finetune.start': 'å¼€å§‹è®­ç»ƒ',
    'finetune.pause': 'æš‚åœ',
    'finetune.config': 'é…ç½®',
    'finetune.metrics': 'æ€§èƒ½æŒ‡æ ‡',
    'finetune.features': 'è´¹æ›¼ç‰¹å¾',
    'finetune.data': 'è®­ç»ƒæ•°æ®',
    'finetune.trainLoss': 'è®­ç»ƒæŸå¤±',
    'finetune.valLoss': 'éªŒè¯æŸå¤±',
    'finetune.bleuScore': 'BLEU åˆ†æ•°',
    'finetune.feynmanSimilarity': 'è´¹æ›¼é£æ ¼ç›¸ä¼¼åº¦',
    'finetune.featureName.analogy': 'ä½¿ç”¨ç±»æ¯”',
    'finetune.featureName.simplify': 'ç®€åŒ–å¤æ‚æ¦‚å¿µ',
    'finetune.featureName.story': 'è®²æ•…äº‹',
    'finetune.featureName.firstprinciples': 'ç¬¬ä¸€æ€§åŸç†',
    'finetune.featureName.interactive': 'äº’åŠ¨æé—®',
    'finetune.weight': 'æƒé‡',
    'finetune.samples': 'æ ·æœ¬',
    'finetune.dataManagement': 'æ•°æ®é›†ç®¡ç†',
    'finetune.fileSize': 'å¤§å°',
    'finetune.lastUpdate': 'æœ€åæ›´æ–°',
    'finetune.uploadDataset': 'ä¸Šä¼ æ•°æ®é›†',
    'finetune.exportFormat': 'å¯¼å‡ºæ ¼å¼',
    'finetune.preprocessing': 'æ•°æ®é¢„å¤„ç†',
    'finetune.dataCleaning': 'æ•°æ®æ¸…æ´—',
    'finetune.formatConversion': 'æ ¼å¼è½¬æ¢',
    'finetune.trainValSplit': 'è®­ç»ƒéªŒè¯åˆ†å‰²',
    'finetune.completed': 'å®Œæˆ',
    'finetune.deployment': 'æ¨¡å‹éƒ¨ç½²',
    'finetune.localDeploy': 'æœ¬åœ°éƒ¨ç½²',
    'finetune.localDeployDesc': 'ä¸‹è½½æ¨¡å‹åˆ°æœ¬åœ°è¿è¡Œ',
    'finetune.downloadModel': 'ä¸‹è½½æ¨¡å‹',
    'finetune.apiDeploy': 'API éƒ¨ç½²',
    'finetune.apiDeployDesc': 'éƒ¨ç½²ä¸º REST API æœåŠ¡',
    'finetune.createApi': 'åˆ›å»º API',
    'finetune.integrationDeploy': 'é›†æˆéƒ¨ç½²',
    'finetune.integrationDeployDesc': 'ä¸ RAG å’ŒçŸ¥è¯†å›¾è°±é›†æˆ',
    'finetune.integrateDeploy': 'é›†æˆéƒ¨ç½²',
    
    // Knowledge Graph Layer
    'kg.title': 'çŸ¥è¯†å›¾è°±å±‚',
    'kg.subtitle': 'æ„å»ºè´¹æ›¼æ¦‚å¿µç½‘ç»œï¼Œå®ç°æ¦‚å¿µé—´çš„å…³è”æ¨ç†',
    'kg.search': 'å›¾è°±æœç´¢',
    'kg.searchPlaceholder': 'æœç´¢æ¦‚å¿µèŠ‚ç‚¹...',
    'kg.addConcept': 'æ·»åŠ æ¦‚å¿µ',
    'kg.conceptNodes': 'æ¦‚å¿µèŠ‚ç‚¹',
    'kg.connections': 'è¿æ¥',
    'kg.feynmanExplanations': 'è´¹æ›¼è§£é‡Š',
    'kg.relationNetwork': 'å…³ç³»ç½‘ç»œ',
    'kg.strength': 'å¼ºåº¦',
    'kg.reasoningEngine': 'æ¨ç†å¼•æ“',
    'kg.pathFinding': 'è·¯å¾„æŸ¥æ‰¾',
    'kg.pathFindingDesc': 'å‘ç°æ¦‚å¿µé—´çš„éšè—è”ç³»',
    'kg.runPathAnalysis': 'è¿è¡Œè·¯å¾„åˆ†æ',
    'kg.similarity': 'ç›¸ä¼¼æ€§è®¡ç®—',
    'kg.similarityDesc': 'åŸºäºå›¾ç»“æ„çš„æ¦‚å¿µç›¸ä¼¼åº¦',
    'kg.calculateSimilarity': 'è®¡ç®—ç›¸ä¼¼æ€§',
    'kg.localGraphDb': 'æœ¬åœ°å›¾æ•°æ®åº“',
    'kg.localGraphDbDesc': 'çŸ¥è¯†å›¾è°±å¯ä»¥ä½¿ç”¨ NetworkX (Python) æˆ– Neo4j åœ¨æœ¬åœ°æ„å»º',
    'kg.downloadScript': 'ä¸‹è½½å›¾è°±æ„å»ºè„šæœ¬',
    
    // RAG Layer
    'rag.title': 'RAG æ£€ç´¢å±‚',
    'rag.subtitle': 'å®æ—¶æ£€ç´¢ç›¸å…³æ–‡æ¡£ï¼Œä¸ºæ¨¡å‹æä¾›å‡†ç¡®çš„èƒŒæ™¯çŸ¥è¯†',
    'rag.semanticSearch': 'è¯­ä¹‰æ£€ç´¢æµ‹è¯•',
    'rag.searchPlaceholder': 'è¾“å…¥æŸ¥è¯¢é—®é¢˜ï¼Œä¾‹å¦‚ï¼šä»€ä¹ˆæ˜¯èƒ½é‡ï¼Ÿ',
    'rag.retrieve': 'æ£€ç´¢',
    'rag.results': 'æ£€ç´¢ç»“æœ',
    'rag.similarity': 'ç›¸ä¼¼åº¦',
    'rag.vectorCollections': 'å‘é‡é›†åˆ',
    'rag.documents': 'æ–‡æ¡£',
    'rag.vectors': 'å‘é‡',
    'rag.lastUpdate': 'æœ€åæ›´æ–°',
    'rag.status.active': 'æ´»è·ƒ',
    'rag.status.indexing': 'ç´¢å¼•ä¸­',
    'rag.status.error': 'é”™è¯¯',
    'rag.docManagement': 'æ–‡æ¡£ç®¡ç†',
    'rag.uploadDoc': 'ä¸Šä¼ æ–°æ–‡æ¡£',
    'rag.supportedFormats': 'æ”¯æŒæ ¼å¼',
    'rag.processingFlow': 'å¤„ç†æµç¨‹',
    'rag.docChunking': 'æ–‡æ¡£åˆ†å— (512 tokens)',
    'rag.vectorEncoding': 'å‘é‡åŒ–ç¼–ç ',
    'rag.indexBuilding': 'ç´¢å¼•æ„å»º',
    'rag.retrievalConfig': 'æ£€ç´¢é…ç½®',
    'rag.topK': 'Top-K æ£€ç´¢',
    'rag.topKDesc': 'è¿”å›å‰ K ä¸ªæœ€ç›¸ä¼¼çš„æ–‡æ¡£ç‰‡æ®µ',
    'rag.similarityThreshold': 'ç›¸ä¼¼åº¦é˜ˆå€¼',
    'rag.similarityThresholdDesc': 'è¿‡æ»¤ä½ç›¸ä¼¼åº¦çš„ç»“æœ',
    'rag.maxTokens': 'æœ€å¤§ Tokens',
    'rag.maxTokensDesc': 'é™åˆ¶ä¸Šä¸‹æ–‡é•¿åº¦',
    'rag.localVectorDb': 'æœ¬åœ°å‘é‡æ•°æ®åº“',
    'rag.localVectorDbDesc': 'RAG åŠŸèƒ½å¯ä»¥ä½¿ç”¨ FAISSã€ChromaDB æˆ– Qdrant åœ¨æœ¬åœ°éƒ¨ç½²',
    'rag.downloadRagScript': 'ä¸‹è½½ RAG éƒ¨ç½²è„šæœ¬',
    'rag.feynmanLectures': 'è´¹æ›¼ç‰©ç†å­¦è®²ä¹‰',
    'rag.feynmanInterviews': 'è´¹æ›¼è®¿è°ˆå½•',
    'rag.scientificPapers': 'ç§‘å­¦è®ºæ–‡é›†',
    
    // Main Page
    'main.title': 'è´¹æ›¼å­¦ä¹ æ³•æ ‡æ³¨',
  },
  en: {
    // Navigation
    'nav.annotation': 'Annotation',
    'nav.management': 'Management',
    'nav.architecture': 'Architecture',
    'nav.settings': 'Settings',
    'nav.statistics': 'Statistics',
    
    // Architecture tabs
    'arch.localTraining': 'Local Training',
    'arch.overview': 'Architecture',
    'arch.knowledgeGraph': 'Knowledge Graph',
    'arch.rag': 'RAG Retrieval',
    'arch.fineTuning': 'Fine-tuning',
    
    // Annotation Form
    'annotation.title': 'Feynman Learning Annotation',
    'annotation.subtitle': '"If you want to learn about nature, to appreciate nature, it is necessary that you understand the language that she speaks in."',
    'annotation.author': 'â€” Richard P. Feynman',
    'annotation.question': 'User Question',
    'annotation.response': 'Feynman-style Response',
    'annotation.styleFeatures': 'Thinking Pattern Tags',
    'annotation.quality': 'Response Quality',
    'annotation.notes': 'Notes',
    'annotation.save': 'Save Annotation',
    'annotation.saveAndNext': 'Save & Next',
    'annotation.question.placeholder': 'e.g., What is quantum mechanics?',
    'annotation.response.placeholder': 'How would Feynman explain this? Use simple, intuitive ways...',
    'annotation.quality.placeholder': 'Select quality level',
    'annotation.notes.placeholder': 'Additional notes...',
    'annotation.validation.title': 'Please fill required fields',
    'annotation.validation.desc': 'Question and response are required',
    'annotation.saved.title': 'Annotation Saved',
    'annotation.saved.desc2': 'Data successfully saved, continue to next annotation',
    'annotation.templateHint': 'Press / to quickly insert templates',
    
    // Templates
    'template.analogy': 'This is like...',
    'template.simplify': 'Simply put...',
    'template.story': 'Imagine...',
    'template.firstPrinciple': 'Starting from the basics...',
    'template.example': 'For example...',
    'template.why': 'Why does this happen?',
    'template.conclusion': 'To summarize...',
    
    // Quality levels
    'quality.excellent': 'Excellent',
    'quality.good': 'Good',
    'quality.needsWork': 'Needs Work',
    
    // Style features
    'style.analogy': 'Use Analogies',
    'style.simplify': 'Simplify Complex',
    'style.story': 'Tell Stories',
    'style.firstprinciples': 'First Principles',
    'style.analogy.desc': 'Explain complex concepts with simple examples',
    'style.simplify.desc': 'Simplify complex expressions',
    'style.story.desc': 'Use storytelling to enhance understanding',
    'style.firstprinciples.desc': 'Think from basic principles',
    
    // Shortcuts
    'shortcuts.save': 'Ctrl+Enter: Save & Next',
    'shortcuts.tab': 'Tab: Switch Fields',
    'shortcuts.template': '/: Insert Template',
    'shortcuts.clear': 'Escape: Clear',
    'shortcuts.keyboard': 'Shortcuts',
    
    // Workspace
    'workspace.dualMode': 'Dual Mode',
    'workspace.singleMode': 'Single Mode',
    
    // Data Management
    'manage.title': 'Data Management',
    'manage.subtitle': '{total} annotations total, {filtered} filtered',
    'manage.export': 'Export Data',
    'manage.search': 'Search questions or responses...',
    'manage.filterQuality': 'Filter by Quality',
    'manage.allQuality': 'All Quality',
    'manage.noData': 'No annotations yet',
    'manage.noDataDesc': 'Start creating your first annotation!',
    'manage.viewDetail': 'View Annotation Detail',
    'manage.question': 'Question',
    'manage.response': 'Feynman-style Response',
    'manage.stylePattern': 'Thinking Patterns',
    'manage.notes': 'Notes',
    'manage.deleted': 'Deleted',
    'manage.deletedDesc': 'Annotation successfully deleted',
    'manage.exported': 'Export Complete',
    'manage.exportedDesc': 'Annotations exported as JSON file',
    
    // Training
    'training.title': 'Local Training Setup',
    'training.subtitle': 'Configure and train your Feynman learning model locally',
    'training.setup': 'Setup',
    'training.data': 'Data',
    'training.scripts': 'Scripts',
    'training.deploy': 'Deploy',
    'training.modelParams': 'Model Parameters',
    'training.baseModel': 'Base Model',
    'training.systemReqs': 'System Requirements',
    'training.gpuMemory': 'GPU Memory',
    'training.dataStats': 'Data Statistics',
    'training.generateScript': 'Generate Script',
    'training.epochs': 'Training Epochs',
    'training.batchSize': 'Batch Size',
    'training.learningRate': 'Learning Rate',
    'training.systemMemory': 'System Memory',
    'training.storage': 'Storage Space',
    'training.pythonVersion': 'Python Version',
    'training.recommendedConfig': 'Recommended Configuration',
    'training.totalAnnotations': 'Total Annotations',
    'training.trainingSet': 'Training Set',
    'training.qualityDistribution': 'Quality Distribution',
    'training.excellent': 'Excellent',
    'training.good': 'Good',
    'training.needsWork': 'Needs Work',
    'training.dataExport': 'Data Export',
    'training.exportTrainingData': 'Export Training Data (JSON)',
    'training.dataFormatDescription': 'Data Format Description',
    'training.generateTrainingScript': 'Generate Training Script',
    'training.generateDependencies': 'Generate Dependencies',
    'training.generateConfig': 'Generate Configuration File',
    'training.trainingWorkflow': 'Training Workflow',
    'training.envSetup': 'Environment Setup',
    'training.envSetupDesc': 'Install Python dependencies and CUDA',
    'training.dataExportStep': 'Data Export',
    'training.dataExportDesc': 'Export JSON data from annotation interface',
    'training.scriptDownload': 'Script Download',
    'training.scriptDownloadDesc': 'Download auto-generated training script',
    'training.startTraining': 'Start Training',
    'training.startTrainingDesc': 'Run the training script locally',
    'training.realTimePreview': 'Start Real-time Preview...',
    'training.localDeployment': 'Local Deployment',
    'training.deploymentInstructions': 'Instructions for Local Deployment',
    'training.loadModelCode': 'Model Loading Code',
    'training.performanceOptimization': 'Performance Optimization',
    'training.quantization': 'Quantization',
    'training.quantizationDesc': 'Reduce model size using 4-bit quantization',
    'training.caching': 'Caching',
    'training.cachingDesc': 'Cache frequently used responses',
    'training.inference': 'Inference Acceleration',
    'training.inferenceDesc': 'Use vLLM for fast inference',
    'training.scriptGenerated': 'Training Script Generated',
    'training.scriptGeneratedDesc': 'Python training script has been downloaded locally',
    'training.dataExported': 'Training Data Exported',
    'training.dataExportedDesc': 'annotation data exported in JSON format',
    'training.dependenciesGenerated': 'Dependencies File Generated',
    'training.dependenciesGeneratedDesc': 'requirements.txt has been downloaded',
    'training.startFeynmanTraining': 'ğŸš€ Starting Feynman learning model training...',
    'training.loadingFinetuning': 'ğŸ“š Starting fine-tuning...',
    'training.trainingComplete': 'âœ… Training complete! Model saved to:',

    // Knowledge Graph
    'kg.title': 'Knowledge Graph Layer',
    'kg.subtitle': 'Build Feynman concept networks for relational reasoning between concepts',
    'kg.search': 'Graph Search',
    'kg.searchPlaceholder': 'Search concept nodes...',
    'kg.addConcept': 'Add Concept',
    'kg.conceptNodes': 'Concept Nodes',
    'kg.connections': 'connections',
    'kg.feynmanExplanations': 'Feynman explanations',
    'kg.relationshipNetwork': 'Relationship Network',
    'kg.strength': 'Strength',
    'kg.reasoningEngine': 'Reasoning Engine',
    'kg.pathFinding': 'Path Finding',
    'kg.pathFindingDesc': 'Discover hidden connections between concepts',
    'kg.runPathAnalysis': 'Run Path Analysis',
    'kg.similarityCalculation': 'Similarity Calculation',
    'kg.similarityDesc': 'Graph structure-based concept similarity',
    'kg.calculateSimilarity': 'Calculate Similarity',
    'kg.localGraphDatabase': 'Local Graph Database',
    'kg.graphDatabaseDesc': 'Knowledge graphs can be built locally using NetworkX (Python) or Neo4j',
    'kg.downloadGraphScript': 'Download Graph Building Script',
    'kg.quantumMechanics': 'Quantum Mechanics',
    'kg.compoundInterest': 'Compound Interest',
    'kg.energy': 'Energy',
    'kg.probability': 'Probability',
    'kg.exponentialGrowth': 'Exponential Growth',
    'kg.conservationLaw': 'Conservation Law',

    // RAG Layer
    'rag.title': 'RAG Retrieval Layer',
    'rag.subtitle': 'Real-time retrieval of relevant documents to provide accurate background knowledge for the model',
    'rag.semanticRetrieval': 'Semantic Retrieval Test',
    'rag.searchPlaceholder': 'Enter query question, e.g.: What is energy?',
    'rag.retrieve': 'Retrieve',
    'rag.retrievalResults': 'Retrieval Results',
    'rag.similarity': 'Similarity',
    'rag.vectorCollections': 'Vector Collections',
    'rag.active': 'Active',
    'rag.indexing': 'Indexing',
    'rag.error': 'Error',
    'rag.documents': 'documents',
    'rag.vectors': 'vectors',
    'rag.lastUpdate': 'Last update',
    'rag.documentManagement': 'Document Management',
    'rag.uploadNewDocument': 'Upload New Document',
    'rag.supportedFormats': 'Supported Formats',
    'rag.processingWorkflow': 'Processing Workflow',
    'rag.documentChunking': 'Document chunking (512 tokens)',
    'rag.vectorEncoding': 'Vector encoding',
    'rag.indexBuilding': 'Index building',
    'rag.retrievalConfig': 'Retrieval Configuration',
    'rag.topKRetrieval': 'Top-K Retrieval',
    'rag.topKDesc': 'Return top K most similar document segments',
    'rag.similarityThreshold': 'Similarity Threshold',
    'rag.similarityThresholdDesc': 'Filter low similarity results',
    'rag.maxTokens': 'Max Tokens',
    'rag.maxTokensDesc': 'Limit context length',
    'rag.localVectorDatabase': 'Local Vector Database',
    'rag.vectorDatabaseDesc': 'RAG functionality can be deployed locally using FAISS, ChromaDB, or Qdrant',
    'rag.downloadRAGScript': 'Download RAG Deployment Script',
    'rag.feynmanLectures': 'Feynman Lectures on Physics',
    'rag.feynmanInterviews': 'Feynman Interview Archives',
    'rag.scientificPapers': 'Scientific Papers Collection',

    // Common
    'optional': 'optional',
    
    // Preview Panel
    'preview.realTime': 'Real-time Preview',
    'preview.quality': 'Quality Rating',
    'preview.analysis': 'Quality Analysis',
    'preview.wordCount': 'Word Count',
    'preview.complexity': 'Complexity',
    'preview.complexity.å¤æ‚': 'Complex',
    'preview.complexity.ä¸­ç­‰': 'Medium',
    'preview.complexity.ç®€å•': 'Simple',
    'preview.hasAnalogy': 'Contains Analogy',
    'preview.hasExample': 'Has Examples',
    'preview.isSimple': 'Appropriate Length',
    
    // Template Selector
    'template.title': 'Feynman Templates',
    'template.category.explanation': 'Explanation',
    'template.category.reasoning': 'Reasoning',
    'template.category.storytelling': 'Storytelling',
    'template.tip': 'Tip: Press "/" in text box to quickly invoke templates',
    
    // Architecture Overview
    'arch.overview.title': 'System Architecture Blueprint',
    'arch.overview.subtitle': 'Feynman-style LLM system architecture combining fine-tuning, RAG, and knowledge graphs',
    'arch.ui.title': 'User Interface Layer (Web)',
    'arch.ui.desc': 'Feynman annotation interface, management system',
    'arch.ui.components': ['Annotation Page', 'Management Interface', 'Real-time Preview'],
    'arch.kg.title': 'Knowledge Graph Layer',
    'arch.kg.desc': 'Preprocessed structured knowledge',
    'arch.kg.components': ['First Principles Deconstruction Tree', 'Cross-Domain Analogy Network', 'Reasoning Engine'],
    'arch.rag.title': 'RAG Retrieval Layer',
    'arch.rag.desc': 'Real-time external resource retrieval',
    'arch.rag.components': ['Vector Database', 'Original Text Library', 'Similarity Matching'],
    'arch.model.title': 'Base Model Layer',
    'arch.model.desc': 'Fine-tuned Mistral',
    'arch.model.components': ['Feynman Language Model', 'Value Alignment', 'Basic Reasoning Ability'],
    'arch.status.active': 'Implemented',
    'arch.status.ready': 'Ready to Start',
    'arch.status.planned': 'Planned',
    'arch.dataflow.title': 'âš¡ï¸ Combat Procedure Walkthrough',
    'arch.dataflow.question': 'User asks: "Mr. Feynman, using your thinking approach, explain why the sky is blue?"',
    'arch.dataflow.step1': '1. ã€Knowledge Graphã€‘Fact Framework Construction: System identifies core concept "why sky is blue" â†’ [Rayleigh scattering, light wavelength, atmospheric molecules]',
    'arch.dataflow.step2': '2. ã€RAG Retrievalã€‘Raw Intelligence Acquisition: Retrieval engine fetches authoritative physics texts explaining "Rayleigh scattering"',
    'arch.dataflow.step3': '3. ã€Feynman Coreã€‘Insight Generation: FeynmanOS activates "analogical thinking" mode, reconstructing complex physics into "pinball machine metaphor"',
    'arch.roadmap.title': 'Implementation Roadmap',
    'arch.phase1.title': 'Phase 1: Fine-tuning Training',
    'arch.phase1.desc': 'Train Feynman-style model using annotation data',
    'arch.phase2.title': 'Phase 2: RAG Integration',
    'arch.phase2.desc': 'Add vector database and document retrieval',
    'arch.phase3.title': 'Phase 3: Knowledge Graph',
    'arch.phase3.desc': 'Build concept relationship network and reasoning engine',
    'arch.startTraining': 'Start Local Training',
    'arch.localOnly': 'Completely local, no external dependencies',
    
    // Fine-tuning Layer
    'finetune.title': 'Base Model Layer',
    'finetune.subtitle': 'Fine-tune Mistral model, inject Feynman-style explanation style and value alignment',
    'finetune.console': 'Training Console',
    'finetune.totalSamples': 'Total Samples',
    'finetune.epochs': 'Training Epochs',
    'finetune.currentEpoch': 'Current Epoch',
    'finetune.progress': 'Progress',
    'finetune.status.training': 'Training',
    'finetune.status.paused': 'Paused',
    'finetune.status.idle': 'Idle',
    'finetune.start': 'Start Training',
    'finetune.pause': 'Pause',
    'finetune.config': 'Configuration',
    'finetune.metrics': 'Performance Metrics',
    'finetune.features': 'Feynman Features',
    'finetune.data': 'Training Data',
    'finetune.trainLoss': 'Training Loss',
    'finetune.valLoss': 'Validation Loss',
    'finetune.bleuScore': 'BLEU Score',
    'finetune.feynmanSimilarity': 'Feynman Style Similarity',
    'finetune.featureName.analogy': 'Use Analogies',
    'finetune.featureName.simplify': 'Simplify Complex Concepts',
    'finetune.featureName.story': 'Tell Stories',
    'finetune.featureName.firstprinciples': 'First Principles',
    'finetune.featureName.interactive': 'Interactive Questioning',
    'finetune.weight': 'Weight',
    'finetune.samples': 'samples',
    'finetune.dataManagement': 'Dataset Management',
    'finetune.fileSize': 'Size',
    'finetune.lastUpdate': 'Last Update',
    'finetune.uploadDataset': 'Upload Dataset',
    'finetune.exportFormat': 'Export Format',
    'finetune.preprocessing': 'Data Preprocessing',
    'finetune.dataCleaning': 'Data Cleaning',
    'finetune.formatConversion': 'Format Conversion',
    'finetune.trainValSplit': 'Train-Validation Split',
    'finetune.completed': 'Completed',
    'finetune.deployment': 'Model Deployment',
    'finetune.localDeploy': 'Local Deployment',
    'finetune.localDeployDesc': 'Download model to run locally',
    'finetune.downloadModel': 'Download Model',
    'finetune.apiDeploy': 'API Deployment',
    'finetune.apiDeployDesc': 'Deploy as REST API service',
    'finetune.createApi': 'Create API',
    'finetune.integrationDeploy': 'Integration Deployment',
    'finetune.integrationDeployDesc': 'Integrate with RAG and knowledge graph',
    'finetune.integrateDeploy': 'Integration Deploy',
  }
};

export const LanguageProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {
  const [language, setLanguage] = useState<Language>('zh');

  const t = (key: string, variables?: Record<string, string | number>): string => {
    let translation = translations[language][key as keyof typeof translations[typeof language]] || key;
    
    // Handle array translations - join them with comma
    if (Array.isArray(translation)) {
      translation = translation.join(', ');
    }
    
    if (variables && typeof translation === 'string') {
      Object.entries(variables).forEach(([variableKey, value]) => {
        translation = (translation as string).replace(`{${variableKey}}`, String(value));
      });
    }
    
    return translation as string;
  };

  // åŠ¨æ€åˆ‡æ¢å­—ä½“æ—
  useEffect(() => {
    document.body.className = document.body.className.replace(/lang-\w+/g, '');
    document.body.classList.add(`lang-${language}`);
  }, [language]);

  return (
    <LanguageContext.Provider value={{ language, setLanguage, t }}>
      {children}
    </LanguageContext.Provider>
  );
};

export const useLanguage = () => {
  const context = useContext(LanguageContext);
  if (context === undefined) {
    throw new Error('useLanguage must be used within a LanguageProvider');
  }
  return context;
};